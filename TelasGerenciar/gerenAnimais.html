<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gerenciar Animais</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script src="../ControllerJs/animalController.js"></script>

    
    <script>
        // Exemplo de dados (substituir pela chamada real da API ou Banco de Dados)
        const animais = [
            {
                id: 1,
                nome: "Rex",
                raca: "Labrador",
                idade: 5,
                sexo: "M",
                peso: 30,
                castrado: true,
                adotado: true
            },
            {
                id: 2,
                nome: "Mimi",
                raca: "Persa",
                idade: 2,
                sexo: "F",
                peso: 4,
                castrado: false,
                adotado: true
            }
        ];

        // Função para carregar os dados na tabela
        function carregarAnimais() {
            const tabela = document.getElementById('resultado');
            tabela.innerHTML = '';

            animais.forEach(animal => {
                let row = `
                    <tr>
                        <td>${animal.id}</td>
                        <td>${animal.nome}</td>
                        <td>${animal.raca}</td>
                        <td>${animal.idade}</td>
                        <td>${animal.sexo === 'M' ? 'Macho' : 'Fêmea'}</td>
                        <td>${animal.peso} kg</td>
                        <td>${animal.castrado ? 'Sim' : 'Não'}</td>
                        <td>${animal.adotado ? 'Sim' : 'Não'}</td>
                        <td>
                            <button class="btn btn-warning btn-sm" onclick="editarAnimal(${animal.id})">Alterar</button>
                            <button class="btn btn-danger btn-sm" onclick="excluirAnimal(${animal.id})">Excluir</button>
                        </td>
                    </tr>
                `;
                tabela.innerHTML += row;
            });
        }

        // Função para editar animal
        function editarAnimal(id) {
            const animal = animais.find(a => a.id === id);
            if (animal) {
                // Redireciona para a tela de cadastro com os dados preenchidos
                window.location.href = `../TelasCadastros/cadAnimal.html?id=${animal.id}&nome=${animal.nome}&raca=${animal.raca}&idade=${animal.idade}&sexo=${animal.sexo}&peso=${animal.peso}&castrado=${animal.castrado}&adotado=${animal.adotado}`;
            }
        }

        // Função para excluir animal
        function excluirAnimal(id) {
            if (confirm('Tem certeza que deseja excluir este animal?')) {
                const index = animais.findIndex(a => a.id === id);
                if (index !== -1) {
                    animais.splice(index, 1);
                    carregarAnimais(); // Recarregar tabela após exclusão
                    alert('Animal excluído com sucesso!');
                }
            }
        }

        // Carregar os dados na tabela ao carregar a página
        window.onload = carregarAnimais;
    </script>
</head>

<body>
    <!-- Cabeçalho -->
    <header class="bg-dark text-white p-3">
        <div class="container d-flex justify-content-between align-items-center">
            <!-- Logo ou Título -->
            <h1 class="h3">Sistema AuauMiau</h1>

            <!-- Menu de navegação -->
            <nav>
                <ul class="nav">
                    <li class="nav-item">
                        <a class="nav-link text-white" href="../index.html">Home</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" id="navbarDropdown" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">Cadastro</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                            <li><a class="dropdown-item" href="../TelasCadastros/cadUsuario.html">Usuário</a></li>
                            <li><a class="dropdown-item" href="../TelasCadastros/cadAnimal.html">Animal</a></li>
                            <li><a class="dropdown-item" href="../TelasCadastros/cadTipoLancamento.html">Tipo de
                                    Lançamento</a></li>
                            <li><a class="dropdown-item" href="../TelasCadastros/cadTipoMedicamento.html">Tipo de
                                    Medicamento</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" id="navbarDropdownManage" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">Gerenciar</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownManage">
                            <li><a class="dropdown-item" href="./gerenUsuarios.html">Usuário</a></li>
                            <li><a class="dropdown-item" href="./gerenAnimais.html">Animal</a></li>
                            <li><a class="dropdown-item" href="./gerenTipoLancamentos.html">Tipo de Lançamento</a></li>
                            <li><a class="dropdown-item" href="./gerenMedicamentos.html">Tipo de Medicamento</a></li>
                        </ul>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link text-white dropdown-toggle" href="#" id="navbarDropdownLogin" role="button"
                            data-bs-toggle="dropdown" aria-expanded="false">Login</a>
                        <ul class="dropdown-menu" aria-labelledby="navbarDropdownLogin">
                            <li><a class="dropdown-item" href="#">Entrar</a></li>
                            <li><a class="dropdown-item" href="#">Registrar</a></li>
                            <li><a class="dropdown-item" href="#">Sair</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <body>
        <!-- Aqui o menu será carregado dinamicamente -->
        <div id="menu"></div>

        <div class="container mt-5">
            <h2>Gerenciar Animais</h2>

            <div style="overflow: auto; max-height: 400px;">
                <table class="table table-striped">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Raça</th>
                            <th>Idade</th>
                            <th>Sexo</th>
                            <th>Peso</th>
                            <th>Castrado</th>
                            <th>Adotado</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody id="resultado">
                        <!-- Os dados serão preenchidos dinamicamente -->
                    </tbody>
                </table>
            </div>

            <div class="btn-section mt-3">
                <a href="../TelasCadastros/cadAnimal.html" class="btn btn-primary">Cadastrar Novo Animal</a>
                <button class="btn btn-secondary" onclick="history.back()">Voltar</button>
            </div>
        </div>


    </body>

</html>